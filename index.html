<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Karousos Restaurant | Παραλαβές Αποθήκης</title>

<style>
:root{
  --primary:#0d6efd;
  --primary-dark:#0b5ed7;
  --bg:#f5f7fb;
  --card:#ffffff;
  --danger:#dc3545;
}

*{box-sizing:border-box;}

body{
  margin:0;
  font-family: "Segoe UI", Roboto, Arial;
  background:var(--bg);
  color:#333;
}

/* HEADER */
header{
  background:var(--primary);
  color:white;
  padding:16px;
  text-align:center;
  font-size:20px;
  font-weight:700;
  letter-spacing:1px;
}

/* LAYOUT */
.container{
  max-width:1200px;
  margin:auto;
  padding:15px;
}

.card{
  background:var(--card);
  border-radius:12px;
  padding:18px;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
  margin-bottom:15px;
}

.page{display:none;}
.active{display:block;}

h2{
  margin-top:0;
}

/* FORM */
label{
  font-weight:600;
  display:block;
  margin-top:10px;
}

input, textarea{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:1px solid #ddd;
  margin-top:5px;
  font-size:15px;
}

textarea{resize:vertical;}

button{
  background:var(--primary);
  color:white;
  border:none;
  padding:12px 18px;
  border-radius:8px;
  font-size:15px;
  cursor:pointer;
  margin-top:10px;
  margin-right:5px;
}

button:hover{background:var(--primary-dark);}

.btn-danger{background:var(--danger);}
.btn-danger:hover{background:#bb2d3b;}

/* TABLE */
.table-wrapper{
  overflow:auto;
}

table{
  width:100%;
  border-collapse:collapse;
  min-width:800px;
}

th,td{
  padding:12px;
  border-bottom:1px solid #eee;
  text-align:left;
}

th{
  background:#eef4ff;
  font-weight:700;
}

.search{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:8px;
  border:1px solid #ccc;
}

/* MOBILE OPTIMIZATION */
@media(max-width:768px){

  header{font-size:18px;}

  button{
    width:100%;
    margin-bottom:8px;
  }

  table{
    font-size:14px;
  }
}

.success{
  color:green;
  font-weight:600;
  margin-top:10px;
}
</style>
</head>

<body>

<header>KAROUSOS RESTAURANT — ΣΥΣΤΗΜΑ ΠΑΡΑΛΑΒΩΝ</header>

<div class="container">

<!-- FORM -->
<div id="form-page" class="page active card">

<h2>Νέα Παραλαβή</h2>

<form id="form">

<label>Προϊόν</label>
<input type="text" id="item" required>

<label>Κωδικός</label>
<input type="text" id="code" required>

<label>Ποσότητα</label>
<input type="text" id="qty" placeholder="π.χ. 10 κιλά" required>

<label>Προμηθευτής</label>
<input type="text" id="supplier">

<label>Ημερομηνία</label>
<input type="date" id="date" required>

<label>Σημειώσεις</label>
<textarea id="notes"></textarea>

<button type="submit">Αποθήκευση</button>
<button type="button" onclick="goTable()">Δες Παραλαβές</button>

</form>

<div class="success" id="msg"></div>

</div>


<!-- TABLE -->
<div id="table-page" class="page card">

<h2>Παραλαβές Αποθήκης</h2>

<input class="search" id="search" placeholder="Αναζήτηση προϊόντος...">

<div class="table-wrapper">
<table id="table">
<thead>
<tr>
<th>Προϊόν</th>
<th>Κωδικός</th>
<th>Ποσότητα</th>
<th>Προμηθευτής</th>
<th>Ημερομηνία</th>
<th>Σημειώσεις</th>
<th>Ενέργεια</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

<button onclick="goForm()">Νέα Παραλαβή</button>

</div>

</div>

<script>
const form=document.getElementById('form');
const tableBody=document.querySelector('#table tbody');
const msg=document.getElementById('msg');

function goTable(){
document.getElementById('form-page').classList.remove('active');
document.getElementById('table-page').classList.add('active');
}

function goForm(){
document.getElementById('table-page').classList.remove('active');
document.getElementById('form-page').classList.add('active');
}

/* AUTO DATE */
document.getElementById('date').valueAsDate=new Date();

/* SUBMIT */
form.addEventListener('submit',e=>{
e.preventDefault();

const entry={
item:item.value,
code:code.value,
qty:qty.value,
supplier:supplier.value,
date:date.value,
notes:notes.value
};

addRow(entry);
save();
form.reset();
date.valueAsDate=new Date();
msg.innerText="✔ Η παραλαβή καταχωρήθηκε";
});

/* ADD ROW */
function addRow(data){
const row=document.createElement('tr');

row.innerHTML=`
<td>${data.item}</td>
<td>${data.code}</td>
<td>${data.qty}</td>
<td>${data.supplier}</td>
<td>${data.date}</td>
<td>${data.notes}</td>
<td>
<button onclick="editRow(this)">Edit</button>
<button class="btn-danger" onclick="deleteRow(this)">Delete</button>
</td>
`;

tableBody.appendChild(row);
}

/* DELETE */
function deleteRow(btn){
btn.closest('tr').remove();
save();
}

/* EDIT */
function editRow(btn){
const row=btn.closest('tr');
const cells=row.querySelectorAll('td');

item.value=cells[0].innerText;
code.value=cells[1].innerText;
qty.value=cells[2].innerText;
supplier.value=cells[3].innerText;
date.value=cells[4].innerText;
notes.value=cells[5].innerText;

row.remove();
goForm();
save();
}

/* SAVE LOCAL */
function save(){
const rows=[...tableBody.querySelectorAll('tr')].map(r=>{
const c=r.querySelectorAll('td');
return{
item:c[0].innerText,
code:c[1].innerText,
qty:c[2].innerText,
supplier:c[3].innerText,
date:c[4].innerText,
notes:c[5].innerText
};
});
localStorage.setItem('karousos_stock',JSON.stringify(rows));
}

/* LOAD */
function load(){
const data=JSON.parse(localStorage.getItem('karousos_stock'))||[];
data.forEach(addRow);
}
load();

/* SEARCH */
document.getElementById('search').addEventListener('input',function(){
const v=this.value.toLowerCase();
document.querySelectorAll('#table tbody tr').forEach(r=>{
r.style.display=r.innerText.toLowerCase().includes(v)?'':'none';
});
});
</script>

</body>
</html>
